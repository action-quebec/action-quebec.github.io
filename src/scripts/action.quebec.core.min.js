(()=>{var u=Object.defineProperty;var h=(e,t,a)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var i=(e,t,a)=>h(e,typeof t!="symbol"?t+"":t,a);self.create=(e,t=null,a=null)=>{let n=document.createElement(e);return t&&(n.className=t),a&&(n.innerHTML=a),n};HTMLElement.prototype.create=function(e,t=null,a=null){let n=create(e,t,a);return this.append(n),n};self.loadJsonProperties=async function(e,t={}){let a=Object.entries(t),n=await Promise.allSettled(a.map(async([r,o])=>{let s=await fetch(o),l=null;try{l=await s.json()}catch{}return{key:r,url:o,status:s.status,ok:s.ok,data:l}}));for(let r of n)if(r.status==="fulfilled"){let{key:o,url:s,status:l,ok:m,data:d}=r.value;if(!m){console.error(`${o} [${l} - ERREUR] ${s}`);continue}e[o]=d}else console.error("Erreur r\xE9seau/JS pendant le chargement :",r.reason);return e};window.LightSwitch={switch:null,init:function(){let e=localStorage.getItem("theme");e&&document.documentElement.setAttribute("data-theme",e),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",t=>this.setTheme(t.matches?"dark":"light")),document.addEventListener("DOMContentLoaded",t=>document.body.create("div","lightswitch").addEventListener("click",a=>this.toogleTheme())),window.addEventListener("resize",t=>document.documentElement.style.setProperty("--vwpx",String(window.innerWidth)),{passive:!0}),document.documentElement.style.setProperty("--vwpx",String(window.innerWidth))},getTheme:function(){return getComputedStyle(document.documentElement).getPropertyValue("--theme").replace(/^['"]|['"]$/g,"").toLocaleLowerCase().trim()},setTheme:function(e){document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)},toogleTheme:function(){this.setTheme(this.getTheme()==="dark"?"light":"dark")}};LightSwitch.init();var c=class{constructor(t){i(this,"START_DOW",0);i(this,"MONTH_NAMES",["janvier","f\xE9vrier","mars","avril","mai","juin","juillet","ao\xFBt","septembre","octobre","novembre","d\xE9cembre"]);i(this,"WEEKDAY_NAMES",["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]);i(this,"container",null);i(this,"month",null);let a=document.querySelector(t);this.container=a.create("div","pxcalendar");let n=this.container.create("div","pxcalendar__daynames");this.WEEKDAY_NAMES.forEach(r=>n.create("div","pxcalendar__daynames__name",r)),this.month=this.container.create("div","pxcalendar__month");for(let r=0;r<42;r++)this.month.create("div","pxcalendar__month__day",String(r))}sayHello(){console.log(`Salut, je m'appelle ${this.name}`)}};var p="America/Toronto";window.Quebec={secrets:null,prec:null,suiv:null,title:null,calendar:null,dates:[],unPays:async function(){await Promise.all([this.initCalendar(),loadJsonProperties(this,{secrets:"/bt1oh97j7X.json"})]),console.log("Qu\xE9bec un pays!")},initCalendar:async function(){this.calendar=new c(".calendrier__container"),document.querySelector(".calendrier__pagination__prec > span").addEventListener("click",e=>this.previous()),document.querySelector(".calendrier__pagination__suiv > span").addEventListener("click",e=>this.next()),this.title=document.querySelector(".calendrier__pagination__cour")},queryGoogleCalendar:async function(){let e=localStorage.getItem("lastItems");if(e)return JSON.parse(e);let{timeMin:t,timeMax:a}=this.getRangeBounds(),n=new URL(`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(this.secrets.CALENDAR_ID)}/events`);n.searchParams.set("key",this.secrets.GOOGLE_API_KEY),n.searchParams.set("supportsAttachments","true"),n.searchParams.set("singleEvents","true"),n.searchParams.set("orderBy","startTime"),n.searchParams.set("timeMin",t),n.searchParams.set("timeMax",a),n.searchParams.set("timeZone",p);let r=await fetch(n.toString());if(!r.ok)throw new Error("Erreur API Google Calendar");let o=await r.json(),s=await this.mapGCalToTuiEvents(o.items??[]);return localStorage.setItem("lastItems",JSON.stringify(s)),s}};})();
